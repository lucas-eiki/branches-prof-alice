<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de notas da Prof. Alice</title>
</head>

<body>
    <h2>Cadastro de notas da Prof. Alice</h2>
    Nome do aluno (pelo menos 9 caracteres): <input type="text" id="iptNome"><br>
    Nota 1: <input type="number" id="iptNota1"><br>
    Nota 2: <input type="number" id="iptNota2"><br>
    Nota 3: <input type="number" id="iptNota3"><br>
    <br>
    <button onclick="cadastrar()">Cadastrar</button>
    <button onclick="listar()">Listar</button>
    <button onclick="mostrarAluno()">Aluno</button>
    <button onclick="mostrarMedia()">Média</button>
    <button onclick="mostrarNotaMaiorQue()">Nota maior que</button>
    <br>
    <div id="resposta"></div>
</body>

</html>

<script>
    var vt_alunos = []

    function validarCadastro(nomeAluno, nota1, nota2, nota3) {
        let msgErro = ''
        if (nomeAluno.length < 9) {
            msgErro += '<br>Tem que conter ao menos 9 caracteres'
        }

        let estaCadastrado = false
        for (let i = 0; i < vt_alunos.length; i++) {
            if (vt_alunos[i].nome == nomeAluno) {
                estaCadastrado = true
                break
            }
        }

        if (estaCadastrado) {
            msgErro += '<br>Já existe um aluno cadastrado com esse nome'
        }
        if (
            nota1 < 0 || nota1 == '' ||
            nota2 < 0 || nota2 == '' ||
            nota3 < 0 || nota3 == ''
        ) {
            msgErro += '<br>As notas devem ser um numérico maior ou igual a zeros'
        }

        if (msgErro != '') {
            resposta.innerHTML = msgErro
            return false
        } else {
            return true
        }
    }

    function cadastrar() {
        let nomeAluno = iptNome.value
        let nota1 = Number(iptNota1.value)
        let nota2 = Number(iptNota2.value)
        let nota3 = Number(iptNota3.value)
        let media = (nota1 + nota2 + nota3) / 3

        resposta.innerHTML = ''
        if (validarCadastro(nomeAluno.trim(), iptNota1.value, iptNota2.value, iptNota3.value)) {

            let aluno = {
                nome: nomeAluno,
                nota1,
                nota2,
                nota3,
                media
            }

            vt_alunos.push(aluno)

            alert('Aluno cadastrado com sucesso!')
        }
    }

    function listar() {
        let respostaPrompt = prompt('Escolha como quer listar: \n1: Do último para o primeiro \n2: Do primeiro para o último')
        let msgResposta = ''

        if (respostaPrompt == 1) {
            for (i = vt_alunos.length - 1; i >= 0; i--) {
                msgResposta += `<br>Aluno: ${vt_alunos[i].nome} – N1: ${(vt_alunos[i].nota1).toFixed(1)} – N2: ${(vt_alunos[i].nota2).toFixed(1)} – N3: ${(vt_alunos[i].nota3).toFixed(1)} – Média: ${(vt_alunos[i].media).toFixed(1)}`
            }
        }
        else if (respostaPrompt == 2) {
            for (i = 0; i < vt_alunos.length; i++) {
                msgResposta += `<br>Aluno: ${vt_alunos[i].nome} – N1: ${(vt_alunos[i].nota1).toFixed(1)} – N2: ${(vt_alunos[i].nota2).toFixed(1)} – N3: ${(vt_alunos[i].nota3).toFixed(1)} – Média: ${(vt_alunos[i].media).toFixed(1)}`
            }
        } else {
            alert('Opção inexistente')
        }

        resposta.innerHTML = ''
        resposta.innerHTML = msgResposta
    }

    function mostrarAluno() {
        let respostaPrompt = prompt('Digite o nome do aluno desejado');

        let msgResposta = '';

        var alunoCadastrado = false;

        for (let i = 0; i < vt_alunos.length; i++) {
            if (respostaPrompt == vt_alunos[i].nome) {
                msgResposta = `<br>Aluno: ${vt_alunos[i].nome} – N1: ${(vt_alunos[i].nota1).toFixed(1)} – N2: ${(vt_alunos[i].nota2).toFixed(1)} – N3: ${(vt_alunos[i].nota3).toFixed(1)} – Média: ${(vt_alunos[i].media).toFixed(1)}`

                resposta.innerHTML = ''
                resposta.innerHTML = msgResposta
                alunoCadastrado = true;
            }
        }
        if (!alunoCadastrado) {
            alert('Aluno não está cadastrado!')
        }
    }





    function mostrarMedia() {
        let respostaPrompt = prompt('Escolha qual média você deseja mostrar: \n1 - Maior média \n2 - Menor média')

        let menorMedia = 10
        let maiorMedia = 0
        let msgResposta = ''
        let indexAluno = 0

        if (respostaPrompt == 1) {
            for (let i = 0; i < vt_media.length; i++) {
                if (vt_media[i] > maiorMedia) {
                    maiorMedia = vt_media[i]
                    indexAluno = i
                }
            }
            msgResposta = `<br>Aluno: ${vt_alunos[indexAluno]} – N1: ${(vt_nota1[indexAluno]).toFixed(1)} – N2: ${(vt_nota2[indexAluno]).toFixed(1)} – N3: ${(vt_nota3[indexAluno]).toFixed(1)} – Média: ${(vt_media[indexAluno]).toFixed(1)} - Maior média: ${maiorMedia.toFixed(1)}`
        }
        else if (respostaPrompt == 2) {
            for (let i = 0; i < vt_media.length; i++) {
                if (vt_media[i] < menorMedia) {
                    menorMedia = vt_media[i]
                    indexAluno = i
                }
            }
            msgResposta = `<br>Aluno: ${vt_alunos[indexAluno]} – N1: ${(vt_nota1[indexAluno]).toFixed(1)} – N2: ${(vt_nota2[indexAluno]).toFixed(1)} – N3: ${(vt_nota3[indexAluno]).toFixed(1)} – Média: ${(vt_media[indexAluno]).toFixed(1)} - Menor média: ${menorMedia.toFixed(1)}`
        }
        else {
            alert('Opção inexistente')
        }

        resposta.innerHTML = ''
        resposta.innerHTML = msgResposta
    }

    function mostrarNotaMaiorQue() {
        let respostaPrompt = prompt('Digite o limite da nota')

        if(respostaPrompt == null) {
            return
        }

        let msgResposta = ''

        for (let i = 0; i < vt_alunos.length; i++) {
            if (
                vt_alunos[i].nota1 > Number(respostaPrompt) ||
                vt_alunos[i].nota2 > Number(respostaPrompt) ||
                vt_alunos[i].nota3 > Number(respostaPrompt)
            ) {
                msgResposta += `<br>Aluno: ${vt_alunos[i].nome} – N1: ${(vt_alunos[i].nota1).toFixed(1)} – N2: ${(vt_alunos[i].nota2).toFixed(1)} – N3: ${(vt_alunos[i].nota3).toFixed(1)} – Média: ${(vt_alunos[i].media).toFixed(1)} - Nota maior que ${respostaPrompt}`
            }
        }

        resposta.innerHTML = ''
        resposta.innerHTML = msgResposta
    }
</script>